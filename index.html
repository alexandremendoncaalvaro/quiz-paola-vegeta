<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Quem disse: Paola ou Vegeta?</title>
    <style>
        :root {
            --duo-green: #58cc02;
            --duo-green-dark: #46a302;
            --duo-red: #ff4b4b;
            --duo-red-dark: #d42c2c;
            --duo-blue: #1cb0f6;
            --duo-blue-dark: #1899d6;
            --duo-gray: #e5e5e5;
            --duo-text: #4b4b4b;
            --white: #ffffff;
            --bg-color: #f7f7f7;
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            margin: 0;
            padding: 0;
            background-color: var(--white);
            color: var(--duo-text);
            display: flex;
            flex-direction: column;
            height: 100vh;
            overflow: hidden;
        }

        /* Header & Progress */
        header {
            padding: 16px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .close-btn {
            font-size: 24px;
            color: #afafaf;
            cursor: pointer;
            border: none;
            background: none;
        }

        .progress-container {
            flex-grow: 1;
            height: 16px;
            background-color: var(--duo-gray);
            border-radius: 8px;
            margin-left: 15px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--duo-green);
            width: 0%;
            transition: width 0.5s ease;
            border-radius: 8px;
        }

        /* Main Game Area */
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        .character-display {
            height: 180px;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }

        .character-img {
            max-height: 100%;
            max-width: 100%;
            border-radius: 12px;
            display: none; /* Hidden by default */
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .placeholder-icon {
            font-size: 80px;
            color: var(--duo-gray);
        }

        .question-bubble {
            border: 2px solid var(--duo-gray);
            border-radius: 16px;
            padding: 20px;
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--duo-text);
            background: white;
            position: relative;
            width: 100%;
            text-align: center;
            margin-bottom: 30px;
        }

        .question-bubble::after {
            content: '';
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 10px 10px;
            border-style: solid;
            border-color: var(--duo-gray) transparent;
            display: block;
            width: 0;
        }

        .question-bubble::before {
            content: '';
            position: absolute;
            top: -7px;
            left: 50%;
            transform: translateX(-50%);
            border-width: 0 10px 10px;
            border-style: solid;
            border-color: #fff transparent;
            display: block;
            width: 0;
            z-index: 1;
        }

        /* Options Grid */
        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            width: 100%;
        }

        .option-card {
            background: white;
            border: 2px solid var(--duo-gray);
            border-bottom: 4px solid var(--duo-gray);
            border-radius: 16px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.1s;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 150px;
        }

        .option-card:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }

        .option-card.selected {
            background-color: #ddf4ff;
            border-color: var(--duo-blue);
            border-bottom-color: var(--duo-blue-dark);
        }

        .option-img {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 10px;
            object-fit: cover;
            border: 2px solid var(--duo-gray);
        }

        .option-label {
            font-weight: 800;
            font-size: 1.1rem;
            color: var(--duo-text);
        }

        /* Feedback Sheet (Bottom) */
        .feedback-sheet {
            position: fixed;
            bottom: -100%;
            left: 0;
            width: 100%;
            padding: 20px;
            padding-bottom: 40px;
            border-top-left-radius: 20px;
            border-top-right-radius: 20px;
            transition: bottom 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 100;
            display: flex;
            flex-direction: column;
        }

        .feedback-sheet.correct {
            background-color: #d7ffb8;
            color: var(--duo-green-dark);
            bottom: 0;
        }

        .feedback-sheet.wrong {
            background-color: #ffdfe0;
            color: var(--duo-red-dark);
            bottom: 0;
        }

        .feedback-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
            font-weight: 800;
            font-size: 1.5rem;
        }

        .feedback-icon {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            background: white;
        }

        .feedback-msg {
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .continue-btn {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 800;
            text-transform: uppercase;
            border: none;
            cursor: pointer;
            color: white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
        }

        .correct .continue-btn {
            background-color: var(--duo-green);
            box-shadow: 0 4px 0 var(--duo-green-dark);
        }

        .wrong .continue-btn {
            background-color: var(--duo-red);
            box-shadow: 0 4px 0 var(--duo-red-dark);
        }

        /* Start / End Screens */
        .screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 200;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 20px;
            text-align: center;
        }
        
        .hidden {
            display: none;
        }

        h1 {
            color: var(--duo-green);
            font-size: 2rem;
            margin-bottom: 10px;
        }

        p {
            color: #777;
            font-size: 1.2rem;
            margin-bottom: 30px;
        }

        .btn-primary {
            background-color: var(--duo-green);
            color: white;
            padding: 15px 40px;
            border-radius: 16px;
            font-size: 1.2rem;
            font-weight: 800;
            border: none;
            border-bottom: 5px solid var(--duo-green-dark);
            cursor: pointer;
            width: 100%;
            max-width: 300px;
        }

        .btn-primary:disabled {
            background-color: var(--duo-gray);
            border-bottom-color: #c7c7c7;
            cursor: not-allowed;
        }
        
        .btn-primary:active:not(:disabled) {
            transform: translateY(3px);
            border-bottom-width: 2px;
        }

        /* Shake Animation */
        .shake {
            animation: shake 0.5s;
        }

        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

    </style>
</head>
<body>

    <div id="start-screen" class="screen">
        <h1 style="color: var(--duo-blue);">Quem Disse?</h1>
        <p>A Elite Mexicana ou<br>A Realeza Saiyajin?</p>
        <div style="font-size: 50px; margin-bottom: 30px;">ðŸ˜ˆ vs ðŸ‘¿</div>
        <button id="start-btn" class="btn-primary" onclick="startGame()" disabled>CARREGANDO...</button>
        <p id="error-msg" style="color: var(--duo-red); font-size: 0.9rem; display: none; margin-top: 10px;">
            Erro ao carregar 'phrases.json'.<br>Use um servidor local (Live Server).
        </p>
    </div>

    <div id="end-screen" class="screen hidden">
        <h1>Fim de Jogo!</h1>
        <p id="final-score">VocÃª acertou X de Y</p>
        <button class="btn-primary" onclick="location.reload()">JOGAR DE NOVO</button>
    </div>

    <header>
        <button class="close-btn" onclick="location.reload()">âœ•</button>
        <div class="progress-container">
            <div id="progress-bar" class="progress-bar"></div>
        </div>
    </header>

    <main>
        <div class="character-display">
            <div id="placeholder-icon" class="placeholder-icon">ðŸ¤”</div>
            <img id="char-img" class="character-img" src="" alt="Personagem">
        </div>

        <div class="question-bubble" id="question-text">
            ...
        </div>

        <div class="options-grid">
            <div class="option-card" onclick="checkAnswer('Paola')">
                <img src="https://i.pinimg.com/originals/9f/21/3c/9f213c4114777265880f07425143a577.jpg" alt="Paola" class="option-img">
                <div class="option-label">Paola</div>
            </div>
            <div class="option-card" onclick="checkAnswer('Vegeta')">
                <img src="https://i.pinimg.com/736x/88/2c/3f/882c3f81e649060b240167c1341c272e.jpg" alt="Vegeta" class="option-img">
                <div class="option-label">Vegeta</div>
            </div>
        </div>
    </main>

    <div id="feedback-sheet" class="feedback-sheet">
        <div class="feedback-header">
            <div class="feedback-icon" id="feedback-icon">âœ“</div>
            <span id="feedback-title">IncrÃ­vel!</span>
        </div>
        <div class="feedback-msg" id="feedback-msg"></div>
        <button class="continue-btn" onclick="nextQuestion()">CONTINUAR</button>
    </div>

    <script>
        // CONFIG VARS
        const paolaGif = "https://media1.tenor.com/m/XjE9q_i2cHQAAAAd/paola-bracho-risada.gif";
        const vegetaGif = "https://media1.tenor.com/m/KeL93YkZ0mUAAAAC/vegeta-laughing.gif";
        
        let database = []; // Will be loaded via fetch
        let questions = [];
        let currentIndex = 0;
        let score = 0;
        let isAnswered = false;

        // Load Data on Init
        window.addEventListener('load', async () => {
            const startBtn = document.getElementById('start-btn');
            const errorMsg = document.getElementById('error-msg');

            try {
                const response = await fetch('phrases.json');
                if (!response.ok) throw new Error("Network response was not ok");
                database = await response.json();
                
                // Enable Game
                startBtn.disabled = false;
                startBtn.innerText = "COMEÃ‡AR";
            } catch (error) {
                console.error("Erro ao carregar JSON:", error);
                startBtn.innerText = "ERRO";
                startBtn.style.backgroundColor = "var(--duo-red)";
                errorMsg.style.display = "block";
            }
        });

        // Shuffle Utility
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Initialize Game
        function startGame() {
            if (database.length === 0) return;
            document.getElementById('start-screen').classList.add('hidden');
            questions = shuffle([...database]).slice(0, 10); // Take 10 random questions
            currentIndex = 0;
            score = 0;
            renderQuestion();
        }

        function renderQuestion() {
            isAnswered = false;
            
            // Update Progress
            const progressPct = (currentIndex / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progressPct}%`;
            
            // Reset UI
            document.getElementById('feedback-sheet').classList.remove('correct', 'wrong');
            document.getElementById('feedback-sheet').style.bottom = "-100%";
            document.getElementById('placeholder-icon').style.display = "block";
            document.getElementById('char-img').style.display = "none";
            document.getElementById('char-img').src = "";
            
            // Set Text
            const currentQ = questions[currentIndex];
            document.getElementById('question-text').innerText = `"${currentQ.text}"`;
        }

        function checkAnswer(selectedWho) {
            if (isAnswered) return;
            isAnswered = true;

            const currentQ = questions[currentIndex];
            const isCorrect = selectedWho === currentQ.who;
            const sheet = document.getElementById('feedback-sheet');
            const feedbackTitle = document.getElementById('feedback-title');
            const feedbackMsg = document.getElementById('feedback-msg');
            const feedbackIcon = document.getElementById('feedback-icon');
            
            // Logic for Images: Always show the person who SAID it laughing
            const gifToShow = currentQ.who === 'Paola' ? paolaGif : vegetaGif;
            
            // Update UI Image
            document.getElementById('placeholder-icon').style.display = "none";
            const imgEl = document.getElementById('char-img');
            imgEl.src = gifToShow;
            imgEl.style.display = "block";

            if (isCorrect) {
                score++;
                sheet.classList.add('correct');
                feedbackTitle.innerText = "Correto!";
                feedbackMsg.innerText = `Exatamente! Foi ${currentQ.who}.`;
                feedbackIcon.innerHTML = "âœ“";
                feedbackIcon.style.color = "var(--duo-green)";
            } else {
                sheet.classList.add('wrong');
                feedbackTitle.innerText = "Errou...";
                feedbackMsg.innerText = `Quem disse isso foi ${currentQ.who}!`;
                feedbackIcon.innerHTML = "âœ•";
                feedbackIcon.style.color = "var(--duo-red)";
                
                // Shake effect on text
                document.getElementById('question-text').classList.add('shake');
                setTimeout(() => document.getElementById('question-text').classList.remove('shake'), 500);
            }
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < questions.length) {
                renderQuestion();
            } else {
                finishGame();
            }
        }

        function finishGame() {
            document.getElementById('end-screen').classList.remove('hidden');
            document.getElementById('final-score').innerText = `VocÃª acertou ${score} de ${questions.length}!`;
            document.getElementById('progress-bar').style.width = `100%`;
        }
    </script>
</body>
</html>
